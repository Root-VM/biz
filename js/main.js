"use strict";$(document).ready(function(){function e(e){e.on("wheel",function(e){e.preventDefault(),e.originalEvent.deltaY<0?$(this).slick("slickNext"):$(this).slick("slickPrev")})}function t(e,t){$(e).on("init reInit afterChange",function(e,o,i,n){var s=(i?i:0)+1;$(t).text(s+"/"+o.slideCount)})}function o(e){var t=document.getElementsByClassName("grid")[0],o=parseInt(window.getComputedStyle(t).getPropertyValue("grid-auto-rows")),i=parseInt(window.getComputedStyle(t).getPropertyValue("grid-row-gap")),n=Math.ceil((e.querySelector(".content").getBoundingClientRect().height+i)/(o+i));e.style.gridRowEnd="span "+n}function i(){for(var e=$(".catalog .item"),t=0;t<e.length&&!window.CP.shouldStopExecution(0);t++)o(e[t]);window.CP.exitedLoop(0)}const n=$(".slider-my"),s=$(".notice .slider-notice, .enterprise .slider-ent");t(".slider-my",".slider-count-mobile"),t(".enterprise .slider-ent",".slider-count-mobile-ent"),t(".n-group .slider-notice",".slider-count-mobile-notice"),n.slick({dots:!1,infinite:!0,slidesToShow:5,slidesToScroll:1,variableWidth:!0,responsive:[{breakpoint:620,settings:{variableWidth:!1,slidesToShow:1}}]}),s.slick({dots:!1,infinite:!0,slidesToShow:2,slidesToScroll:1,variableWidth:!0,responsive:[{breakpoint:620,settings:{variableWidth:!1,slidesToShow:1}}]}),e(n),e(s),$(".nav-block img").click(function(){$(".menu-wrapper").addClass("menu-active")}),$("nav img, nav .texts, nav .btn, .grey-bg").click(function(){$(".menu-wrapper").removeClass("menu-active")}),$(".slider-my .detals").click(function(e){e.preventDefault(),$(".slider-my .info").not($(this).closest(".selected")).removeClass("selected"),$(this).closest(".info").toggleClass("selected")}),$(".slider-ent .detals").click(function(e){e.preventDefault(),$(".slider-ent .texts .detals-text").removeClass("selected"),$(this).closest(".texts ").toggleClass("selected")}),$(".enterprise-page .filter-company .detals").click(function(e){e.preventDefault(),$(".enterprise-page .filter-company .detals-text").removeClass("selected"),$(this).closest(".texts ").toggleClass("selected")}),$(".footer-wrapper .block").click(function(e){e.preventDefault(),$(this).toggleClass("footer-active")});var r=0;$(window).scroll(function(e){var t=$(this).scrollTop();t>r?$("header .header-move").addClass("header-scroll"):$("header .header-move").removeClass("header-scroll"),r=t}),$(".personal-page .controls .btn-s").on("click",function(){$(".personal-page .controls .btn-s").removeClass("active"),$(this).addClass("active"),$(this).hasClass("for-about-us")?($(".personal-page .about-us").css("display","flex"),$(".personal-page .tab-comments").css("display","none")):$(this).hasClass("for-tab-comments")?($(".personal-page .tab-comments").css("display","flex"),$(".personal-page .about-us").css("display","none")):($(".personal-page .about-us").css("display","none"),$(".personal-page .tab-comments").css("display","none"))}),$(".company-page .catalog .item .title").on("click",function(){window.matchMedia("(max-width: 620px)").matches&&(0===$(this).parent().height()?($(this).parent().height($(this).parent().find(".items").height()+45),$(this).parent().addClass("active-item")):($(this).parent().height(0),$(this).parent().removeClass("active-item")),$(".company-page .catalog .item .block").not($(this).parent()).height(0),$(this).parent().css("zIndex",6),$(".company-page .catalog .item .block").not($(this).parent()).removeClass("active-item"),$(".company-page .catalog .item .block").not($(this).parent()).css("zIndex",5))}),$(".company-page .catalog .item .else").on("click",function(){195===$(this).parent().height()?($(this).parent().height($(this).parent().find(".items").height()+45),$(this).parent().addClass("active-item")):($(this).parent().height(195),$(this).parent().removeClass("active-item")),$(".company-page .catalog .item .block").not($(this).parent()).height(195),$(this).parent().css("zIndex",6),$(".company-page .catalog .item .block").not($(this).parent()).removeClass("active-item"),$(".company-page .catalog .item .block").not($(this).parent()).css("zIndex",5)}),$(".company-page .list .loading").on("click",function(){$(this).parent().addClass("active-list")}),setTimeout(function(){$(".enterprise-page .grid .item .content").css("height","100%")}),$(".filter .points").on("click",function(){$(".category-modal").toggleClass("show")}),"object"!=typeof window.CP&&(window.CP={}),window.CP.PenTimer={programNoLongerBeingMonitored:!1,timeOfFirstCallToShouldStopLoop:0,_loopExits:{},_loopTimers:{},START_MONITORING_AFTER:2e3,STOP_ALL_MONITORING_TIMEOUT:5e3,MAX_TIME_IN_LOOP_WO_EXIT:2200,exitedLoop:function(e){this._loopExits[e]=!0},shouldStopLoop:function(e){if(this.programKilledSoStopMonitoring)return!0;if(this.programNoLongerBeingMonitored)return!1;if(this._loopExits[e])return!1;var t=this._getTime();if(0===this.timeOfFirstCallToShouldStopLoop)return this.timeOfFirstCallToShouldStopLoop=t,!1;var o=t-this.timeOfFirstCallToShouldStopLoop;if(o<this.START_MONITORING_AFTER)return!1;if(o>this.STOP_ALL_MONITORING_TIMEOUT)return this.programNoLongerBeingMonitored=!0,!1;try{this._checkOnInfiniteLoop(e,t)}catch(i){return this._sendErrorMessageToEditor(),this.programKilledSoStopMonitoring=!0,!0}return!1},_sendErrorMessageToEditor:function(){try{if(this._shouldPostMessage()){var e={action:"infinite-loop",line:this._findAroundLineNumber()};parent.postMessage(e,"*")}else this._throwAnErrorToStopPen()}catch(t){this._throwAnErrorToStopPen()}},_shouldPostMessage:function(){return document.location.href.match(/boomerang/)},_throwAnErrorToStopPen:function(){throw"We found an infinite loop in your Pen. We've stopped the Pen from running. Please correct it or contact support@codepen.io."},_findAroundLineNumber:function(){var e=new Error,t=0;if(e.stack){var o=e.stack.match(/boomerang\S+:(\d+):\d+/);o&&(t=o[1])}return t},_checkOnInfiniteLoop:function(e,t){if(!this._loopTimers[e])return this._loopTimers[e]=t,!1;if(t-this._loopTimers[e]>this.MAX_TIME_IN_LOOP_WO_EXIT)throw"Infinite Loop found on loop: "+e},_getTime:function(){return+new Date}},window.CP.shouldStopExecution=function(e){var t=window.CP.PenTimer.shouldStopLoop(e);return!0===t&&console.warn("Sorry!"),t},window.CP.exitedLoop=function(e){window.CP.PenTimer.exitedLoop(e)},window.onload=i(),window.addEventListener("resize",i);for(var a=document.getElementsByClassName("item"),l=0;l<a.length&&!window.CP.shouldStopExecution(1);l++);window.CP.exitedLoop(1)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJtb3VzZVdoZWVsIiwiZWxlbWVudCIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0Iiwib3JpZ2luYWxFdmVudCIsImRlbHRhWSIsInRoaXMiLCJzbGljayIsImNvdW50IiwiZWwiLCJjX2VsIiwiZXZlbnQiLCJjdXJyZW50U2xpZGUiLCJuZXh0U2xpZGUiLCJpIiwidGV4dCIsInNsaWRlQ291bnQiLCJyZXNpemVHcmlkSXRlbSIsIml0ZW0iLCJncmlkIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInJvd0hlaWdodCIsInBhcnNlSW50Iiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJyb3dHYXAiLCJyb3dTcGFuIiwiTWF0aCIsImNlaWwiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0Iiwic3R5bGUiLCJncmlkUm93RW5kIiwicmVzaXplQWxsR3JpZEl0ZW1zIiwiYWxsSXRlbXMiLCJ4IiwibGVuZ3RoIiwiQ1AiLCJzaG91bGRTdG9wRXhlY3V0aW9uIiwiZXhpdGVkTG9vcCIsInNsaWRlciIsInNsaWRlcl9ub3RpY2UiLCJkb3RzIiwiaW5maW5pdGUiLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsInZhcmlhYmxlV2lkdGgiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiY2xpY2siLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwibm90IiwiY2xvc2VzdCIsInRvZ2dsZUNsYXNzIiwibGFzdFNjcm9sbFRvcCIsInNjcm9sbCIsInN0Iiwic2Nyb2xsVG9wIiwiaGFzQ2xhc3MiLCJjc3MiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsInBhcmVudCIsImZpbmQiLCJzZXRUaW1lb3V0IiwiUGVuVGltZXIiLCJwcm9ncmFtTm9Mb25nZXJCZWluZ01vbml0b3JlZCIsInRpbWVPZkZpcnN0Q2FsbFRvU2hvdWxkU3RvcExvb3AiLCJfbG9vcEV4aXRzIiwiX2xvb3BUaW1lcnMiLCJTVEFSVF9NT05JVE9SSU5HX0FGVEVSIiwiU1RPUF9BTExfTU9OSVRPUklOR19USU1FT1VUIiwiTUFYX1RJTUVfSU5fTE9PUF9XT19FWElUIiwibyIsInNob3VsZFN0b3BMb29wIiwicHJvZ3JhbUtpbGxlZFNvU3RvcE1vbml0b3JpbmciLCJ0IiwiX2dldFRpbWUiLCJfY2hlY2tPbkluZmluaXRlTG9vcCIsIl9zZW5kRXJyb3JNZXNzYWdlVG9FZGl0b3IiLCJfc2hvdWxkUG9zdE1lc3NhZ2UiLCJhY3Rpb24iLCJsaW5lIiwiX2ZpbmRBcm91bmRMaW5lTnVtYmVyIiwicG9zdE1lc3NhZ2UiLCJfdGhyb3dBbkVycm9yVG9TdG9wUGVuIiwibG9jYXRpb24iLCJocmVmIiwibWF0Y2giLCJFcnJvciIsInN0YWNrIiwiRGF0ZSIsImNvbnNvbGUiLCJ3YXJuIiwib25sb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkFBQUEsWUFDQUEsR0FBRUMsVUFBVUMsTUFBTSxXQUtkLFFBQVNDLEdBQVdDLEdBQ2hCQSxFQUFRQyxHQUFHLFFBQVMsU0FBVUMsR0FDMUJBLEVBQUVDLGlCQUVFRCxFQUFFRSxjQUFjQyxPQUFTLEVBQ3pCVCxFQUFFVSxNQUFNQyxNQUFNLGFBRWRYLEVBQUVVLE1BQU1DLE1BQU0sZUFJMUIsUUFBVUMsR0FBTUMsRUFBSUMsR0FDaEJkLEVBQUVhLEdBQUlSLEdBQUcsMEJBQTJCLFNBQVNVLEVBQU9KLEVBQU9LLEVBQWNDLEdBQ3JFLEdBQUlDLElBQUtGLEVBQWVBLEVBQWUsR0FBSyxDQUM1Q2hCLEdBQUVjLEdBQU1LLEtBQUtELEVBQUksSUFBTVAsRUFBTVMsY0EwTnJDLFFBQVNDLEdBQWVDLEdBQ3BCLEdBQUlDLEdBQU90QixTQUFTdUIsdUJBQXVCLFFBQVEsR0FDL0NDLEVBQVlDLFNBQVNDLE9BQU9DLGlCQUFpQkwsR0FBTU0saUJBQWlCLG1CQUNwRUMsRUFBU0osU0FBU0Ms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LCtIQUVWRixzQkFBdUIsV0FDbkIsR0FBSVYsR0FBSSxHQUFJZ0IsT0FDUmIsRUFBSSxDQUNSLElBQUlILEVBQUVpQixNQUFPLENBQ1QsR0FBSWhGLEdBQUkrRCxFQUFFaUIsTUFBTUYsTUFBTSx5QkFDdEI5RSxLQUFNa0UsRUFBSWxFLEVBQUUsSUFFaEIsTUFBT2tFLElBRVhFLHFCQUFzQixTQUFTTCxFQUFHRyxHQUM5QixJQUFLMUUsS0FBS21FLFlBQVlJLEdBQUksTUFBT3ZFLE1BQUttRSxZQUFZSSxHQUFLRyxHQUFHLENBQzFELElBQUlBLEVBQUkxRSxLQUFLbUUsWUFBWUksR0FBS3ZFLEtBQUtzRSx5QkFBMEIsS0FBTSxnQ0FBa0NDLEdBRXpHSSxTQUFVLFdBQ04sT0FBUSxHQUFJYyxRQUVqQnhFLE9BQU9nQixHQUFHQyxvQkFBc0IsU0FBU3FDLEdBQ3hDLEdBQUlHLEdBQUl6RCxPQUFPZ0IsR0FBRzhCLFNBQVNTLGVBQWVELEVBQzFDLFFBQU8sSUFBT0csR0FBS2dCLFFBQVFDLEtBQUssVUFBV2pCLEdBQzVDekQsT0FBT2dCLEdBQUdFLFdBQWEsU0FBU29DLEdBQy9CdEQsT0FBT2dCLEdBQUc4QixTQUFTNUIsV0FBV29DLElBdUJsQ3RELE9BQU8yRSxPQUFTL0QsSUFDaEJaLE9BQU80RSxpQkFBaUIsU0FBVWhFLEVBR2xDLEtBQUssR0FEREMsR0FBV3ZDLFNBQVN1Qix1QkFBdUIsUUFDdENpQixFQUFJLEVBQUdBLEVBQUlELEVBQVNFLFNBQWtCZixPQUFPZ0IsR0FBR0Msb0JBQW9CLEdBQXhDSCxLQUVwQ2QsT0FBT2dCLEdBQUdFLFdBQVciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgY29uc3Qgc2xpZGVyID0gJChcIi5zbGlkZXItbXlcIik7XHJcbiAgICBjb25zdCBzbGlkZXJfbm90aWNlID0gJChcIi5ub3RpY2UgLnNsaWRlci1ub3RpY2UsIC5lbnRlcnByaXNlIC5zbGlkZXItZW50XCIpO1xyXG5cclxuICAgIC8vIHNsaWRlciBtb3VzZSB3aGVlbFxyXG4gICAgZnVuY3Rpb24gbW91c2VXaGVlbChlbGVtZW50KSB7XHJcbiAgICAgICAgZWxlbWVudC5vbignd2hlZWwnLCAoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZS5vcmlnaW5hbEV2ZW50LmRlbHRhWSA8IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuc2xpY2soJ3NsaWNrTmV4dCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zbGljaygnc2xpY2tQcmV2Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiAgY291bnQoZWwsIGNfZWwpIHtcclxuICAgICAgICAkKGVsKS5vbignaW5pdCByZUluaXQgYWZ0ZXJDaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgc2xpY2ssIGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlKXtcclxuICAgICAgICAgICAgdmFyIGkgPSAoY3VycmVudFNsaWRlID8gY3VycmVudFNsaWRlIDogMCkgKyAxO1xyXG4gICAgICAgICAgICAkKGNfZWwpLnRleHQoaSArICcvJyArIHNsaWNrLnNsaWRlQ291bnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNsaWRlcnMgaW5pdFxyXG4gICAgY291bnQoJy5zbGlkZXItbXknLCAnLnNsaWRlci1jb3VudC1tb2JpbGUnKTtcclxuICAgIGNvdW50KCcuZW50ZXJwcmlzZSAuc2xpZGVyLWVudCcsICcuc2xpZGVyLWNvdW50LW1vYmlsZS1lbnQnKTtcclxuICAgIGNvdW50KCcubi1ncm91cCAuc2xpZGVyLW5vdGljZScsICcuc2xpZGVyLWNvdW50LW1vYmlsZS1ub3RpY2UnKTtcclxuICAgIHNsaWRlci5zbGljayh7XHJcbiAgICAgICAgZG90czogZmFsc2UsXHJcbiAgICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiA1LFxyXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBicmVha3BvaW50OiA2MjAsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfSk7XHJcbiAgICBzbGlkZXJfbm90aWNlLnNsaWNrKHtcclxuICAgICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcclxuICAgICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDYyMCxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVXaWR0aDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICB9KTtcclxuICAgIG1vdXNlV2hlZWwoc2xpZGVyKTtcclxuICAgIG1vdXNlV2hlZWwoc2xpZGVyX25vdGljZSk7XHJcblxyXG4gICAgLy8gbWVudSB0b2dnbGVcclxuICAgICQoJy5uYXYtYmxvY2sgaW1nJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5tZW51LXdyYXBwZXInKS5hZGRDbGFzcygnbWVudS1hY3RpdmUnKTtcclxuICAgIH0pO1xyXG4gICAgJCgnbmF2IGltZywgbmF2IC50ZXh0cywgbmF2IC5idG4sIC5ncmV5LWJnJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5tZW51LXdyYXBwZXInKS5yZW1vdmVDbGFzcygnbWVudS1hY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHRvZ2dsZSBzbGlkZXIgaXRlbSBkZXRhbHNcclxuICAgICQoJy5zbGlkZXItbXkgLmRldGFscycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoXCIuc2xpZGVyLW15IC5pbmZvXCIpLm5vdCgkKHRoaXMpLmNsb3Nlc3QoJy5zZWxlY3RlZCcpKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmluZm8nKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICB9KTtcclxuICAgICQoJy5zbGlkZXItZW50IC5kZXRhbHMnKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgJChcIi5zbGlkZXItZW50IC50ZXh0cyAuZGV0YWxzLXRleHRcIikucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy50ZXh0cyAnKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmVudGVycHJpc2UtcGFnZSAuZmlsdGVyLWNvbXBhbnkgLmRldGFscycpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAkKFwiLmVudGVycHJpc2UtcGFnZSAuZmlsdGVyLWNvbXBhbnkgLmRldGFscy10ZXh0XCIpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcudGV4dHMgJykudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICB9KTtcclxuICAgICQoJy5mb290ZXItd3JhcHBlciAuYmxvY2snKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdmb290ZXItYWN0aXZlJyk7XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIHNjcm9sbCAgdXAgLyBkb3duXHJcbiAgICB2YXIgbGFzdFNjcm9sbFRvcCA9IDA7XHJcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIHZhciBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgaWYgKHN0ID4gbGFzdFNjcm9sbFRvcCl7XHJcbiAgICAgICAgICAgICQoJ2hlYWRlciAuaGVhZGVyLW1vdmUnKS5hZGRDbGFzcygnaGVhZGVyLXNjcm9sbCcpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnaGVhZGVyIC5oZWFkZXItbW92ZScpLnJlbW92ZUNsYXNzKCdoZWFkZXItc2Nyb2xsJylcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFzdFNjcm9sbFRvcCA9IHN0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcGVyc29uYWwgdGFic1xyXG4gICAgJCgnLnBlcnNvbmFsLXBhZ2UgLmNvbnRyb2xzIC5idG4tcycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucGVyc29uYWwtcGFnZSAuY29udHJvbHMgLmJ0bi1zJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICBpZigkKHRoaXMpLmhhc0NsYXNzKCdmb3ItYWJvdXQtdXMnKSl7XHJcbiAgICAgICAgICAgICQoJy5wZXJzb25hbC1wYWdlIC5hYm91dC11cycpLmNzcygnZGlzcGxheScsICdmbGV4Jyk7XHJcbiAgICAgICAgICAgICQoJy5wZXJzb25hbC1wYWdlIC50YWItY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgIH0gZWxzZSBpZigkKHRoaXMpLmhhc0NsYXNzKCdmb3ItdGFiLWNvbW1lbnRzJykpe1xyXG4gICAgICAgICAgICAkKCcucGVyc29uYWwtcGFnZSAudGFiLWNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJ2ZsZXgnKTtcclxuICAgICAgICAgICAgJCgnLnBlcnNvbmFsLXBhZ2UgLmFib3V0LXVzJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICQoJy5wZXJzb25hbC1wYWdlIC5hYm91dC11cycpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgICQoJy5wZXJzb25hbC1wYWdlIC50YWItY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vY29tcGFueSBpdGVtc1xyXG4gICAgJCgnLmNvbXBhbnktcGFnZSAuY2F0YWxvZyAuaXRlbSAudGl0bGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA2MjBweCknKS5tYXRjaGVzKSB7XHJcbiAgICAgICAgICAgIC8vIG1vYmlsZVxyXG4gICAgICAgICAgICBpZigkKHRoaXMpLnBhcmVudCgpLmhlaWdodCgpID09PSAwKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuaGVpZ2h0KCQodGhpcykucGFyZW50KCkuZmluZCgnLml0ZW1zJykuaGVpZ2h0KCkgKyA0NSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdhY3RpdmUtaXRlbScpO1xyXG4gICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmhlaWdodCgwKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1pdGVtJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmNvbXBhbnktcGFnZSAuY2F0YWxvZyAuaXRlbSAuYmxvY2snKS5ub3QoJCh0aGlzKS5wYXJlbnQoKSkuaGVpZ2h0KDApO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmNzcygnekluZGV4JywgNik7XHJcbiAgICAgICAgICAgICQoJy5jb21wYW55LXBhZ2UgLmNhdGFsb2cgLml0ZW0gLmJsb2NrJykubm90KCQodGhpcykucGFyZW50KCkpLnJlbW92ZUNsYXNzKCdhY3RpdmUtaXRlbScpO1xyXG4gICAgICAgICAgICAkKCcuY29tcGFueS1wYWdlIC5jYXRhbG9nIC5pdGVtIC5ibG9jaycpLm5vdCgkKHRoaXMpLnBhcmVudCgpKS5jc3MoJ3pJbmRleCcsIDUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnLmNvbXBhbnktcGFnZSAuY2F0YWxvZyAuaXRlbSAuZWxzZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBkZXNrdG9wXHJcbiAgICAgICAgICAgIGlmKCQodGhpcykucGFyZW50KCkuaGVpZ2h0KCkgPT09IDE5NSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmhlaWdodCgkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5pdGVtcycpLmhlaWdodCgpICsgNDUpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlLWl0ZW0nKTtcclxuICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5oZWlnaHQoMTk1KTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1pdGVtJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmNvbXBhbnktcGFnZSAuY2F0YWxvZyAuaXRlbSAuYmxvY2snKS5ub3QoJCh0aGlzKS5wYXJlbnQoKSkuaGVpZ2h0KDE5NSk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuY3NzKCd6SW5kZXgnLCA2KTtcclxuICAgICAgICAgICAgJCgnLmNvbXBhbnktcGFnZSAuY2F0YWxvZyAuaXRlbSAuYmxvY2snKS5ub3QoJCh0aGlzKS5wYXJlbnQoKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1pdGVtJyk7XHJcbiAgICAgICAgICAgICQoJy5jb21wYW55LXBhZ2UgLmNhdGFsb2cgLml0ZW0gLmJsb2NrJykubm90KCQodGhpcykucGFyZW50KCkpLmNzcygnekluZGV4JywgNSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuY29tcGFueS1wYWdlIC5saXN0IC5sb2FkaW5nJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZS1saXN0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuZW50ZXJwcmlzZS1wYWdlIC5ncmlkIC5pdGVtIC5jb250ZW50JykuY3NzKCdoZWlnaHQnLCAnMTAwJScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gdG9nZ2xlIGNhdGVnb3J5IGJsb2NrXHJcbiAgICAkKCcuZmlsdGVyIC5wb2ludHMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmNhdGVnb3J5LW1vZGFsJykudG9nZ2xlQ2xhc3MoJ3Nob3cnKTtcclxuICAgIH0pO1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiB3aW5kb3cuQ1AgJiYgKHdpbmRvdy5DUCA9IHt9KSwgd2luZG93LkNQLlBlblRpbWVyID0ge1xyXG4gICAgICAgIHByb2dyYW1Ob0xvbmdlckJlaW5nTW9uaXRvcmVkOiAhMSxcclxuICAgICAgICB0aW1lT2ZGaXJzdENhbGxUb1Nob3VsZFN0b3BMb29wOiAwLFxyXG4gICAgICAgIF9sb29wRXhpdHM6IHt9LFxyXG4gICAgICAgIF9sb29wVGltZXJzOiB7fSxcclxuICAgICAgICBTVEFSVF9NT05JVE9SSU5HX0FGVEVSOiAyZTMsXHJcbiAgICAgICAgU1RPUF9BTExfTU9OSVRPUklOR19USU1FT1VUOiA1ZTMsXHJcbiAgICAgICAgTUFYX1RJTUVfSU5fTE9PUF9XT19FWElUOiAyMjAwLFxyXG4gICAgICAgIGV4aXRlZExvb3A6IGZ1bmN0aW9uKG8pIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9vcEV4aXRzW29dID0gITBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNob3VsZFN0b3BMb29wOiBmdW5jdGlvbihvKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2dyYW1LaWxsZWRTb1N0b3BNb25pdG9yaW5nKSByZXR1cm4gITA7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2dyYW1Ob0xvbmdlckJlaW5nTW9uaXRvcmVkKSByZXR1cm4gITE7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9sb29wRXhpdHNbb10pIHJldHVybiAhMTtcclxuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl9nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGlmICgwID09PSB0aGlzLnRpbWVPZkZpcnN0Q2FsbFRvU2hvdWxkU3RvcExvb3ApIHJldHVybiB0aGlzLnRpbWVPZkZpcnN0Q2FsbFRvU2hvdWxkU3RvcExvb3AgPSB0LCAhMTtcclxuICAgICAgICAgICAgdmFyIGkgPSB0IC0gdGhpcy50aW1lT2ZGaXJzdENhbGxUb1Nob3VsZFN0b3BMb29wO1xyXG4gICAgICAgICAgICBpZiAoaSA8IHRoaXMuU1RBUlRfTU9OSVRPUklOR19BRlRFUikgcmV0dXJuICExO1xyXG4gICAgICAgICAgICBpZiAoaSA+IHRoaXMuU1RPUF9BTExfTU9OSVRPUklOR19USU1FT1VUKSByZXR1cm4gdGhpcy5wcm9ncmFtTm9Mb25nZXJCZWluZ01vbml0b3JlZCA9ICEwLCAhMTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrT25JbmZpbml0ZUxvb3AobywgdClcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRFcnJvck1lc3NhZ2VUb0VkaXRvcigpLCB0aGlzLnByb2dyYW1LaWxsZWRTb1N0b3BNb25pdG9yaW5nID0gITAsICEwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICExXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfc2VuZEVycm9yTWVzc2FnZVRvRWRpdG9yOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zaG91bGRQb3N0TWVzc2FnZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJpbmZpbml0ZS1sb29wXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IHRoaXMuX2ZpbmRBcm91bmRMaW5lTnVtYmVyKClcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5wb3N0TWVzc2FnZShvLCBcIipcIilcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLl90aHJvd0FuRXJyb3JUb1N0b3BQZW4oKVxyXG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aHJvd0FuRXJyb3JUb1N0b3BQZW4oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfc2hvdWxkUG9zdE1lc3NhZ2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uaHJlZi5tYXRjaCgvYm9vbWVyYW5nLylcclxuICAgICAgICB9LFxyXG4gICAgICAgIF90aHJvd0FuRXJyb3JUb1N0b3BQZW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIldlIGZvdW5kIGFuIGluZmluaXRlIGxvb3AgaW4geW91ciBQZW4uIFdlJ3ZlIHN0b3BwZWQgdGhlIFBlbiBmcm9tIHJ1bm5pbmcuIFBsZWFzZSBjb3JyZWN0IGl0IG9yIGNvbnRhY3Qgc3VwcG9ydEBjb2RlcGVuLmlvLlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZmluZEFyb3VuZExpbmVOdW1iZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBFcnJvcixcclxuICAgICAgICAgICAgICAgIHQgPSAwO1xyXG4gICAgICAgICAgICBpZiAoby5zdGFjaykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSBvLnN0YWNrLm1hdGNoKC9ib29tZXJhbmdcXFMrOihcXGQrKTpcXGQrLyk7XHJcbiAgICAgICAgICAgICAgICBpICYmICh0ID0gaVsxXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2NoZWNrT25JbmZpbml0ZUxvb3A6IGZ1bmN0aW9uKG8sIHQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9sb29wVGltZXJzW29dKSByZXR1cm4gdGhpcy5fbG9vcFRpbWVyc1tvXSA9IHQsICExO1xyXG4gICAgICAgICAgICBpZiAodCAtIHRoaXMuX2xvb3BUaW1lcnNbb10gPiB0aGlzLk1BWF9USU1FX0lOX0xPT1BfV09fRVhJVCkgdGhyb3cgXCJJbmZpbml0ZSBMb29wIGZvdW5kIG9uIGxvb3A6IFwiICsgb1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2dldFRpbWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gK25ldyBEYXRlXHJcbiAgICAgICAgfVxyXG4gICAgfSwgd2luZG93LkNQLnNob3VsZFN0b3BFeGVjdXRpb24gPSBmdW5jdGlvbihvKSB7XHJcbiAgICAgICAgdmFyIHQgPSB3aW5kb3cuQ1AuUGVuVGltZXIuc2hvdWxkU3RvcExvb3Aobyk7XHJcbiAgICAgICAgcmV0dXJuICEwID09PSB0ICYmIGNvbnNvbGUud2FybihcIlNvcnJ5IVwiKSwgdFxyXG4gICAgfSwgd2luZG93LkNQLmV4aXRlZExvb3AgPSBmdW5jdGlvbihvKSB7XHJcbiAgICAgICAgd2luZG93LkNQLlBlblRpbWVyLmV4aXRlZExvb3AobylcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHJlc2l6ZUdyaWRJdGVtKGl0ZW0pIHtcclxuICAgICAgICB2YXIgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmlkXCIpWzBdO1xyXG4gICAgICAgIHZhciByb3dIZWlnaHQgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShncmlkKS5nZXRQcm9wZXJ0eVZhbHVlKCdncmlkLWF1dG8tcm93cycpKTtcclxuICAgICAgICB2YXIgcm93R2FwID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZ3JpZCkuZ2V0UHJvcGVydHlWYWx1ZSgnZ3JpZC1yb3ctZ2FwJykpO1xyXG4gICAgICAgIHZhciByb3dTcGFuID0gTWF0aC5jZWlsKChpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgcm93R2FwKSAvIChyb3dIZWlnaHQgKyByb3dHYXApKTtcclxuICAgICAgICBpdGVtLnN0eWxlLmdyaWRSb3dFbmQgPSBcInNwYW4gXCIgKyByb3dTcGFuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiByZXNpemVBbGxHcmlkSXRlbXMoKSB7XHJcbiAgICAgICAgdmFyIGFsbEl0ZW1zID0gJChcIi5jYXRhbG9nIC5pdGVtXCIpO1xyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgYWxsSXRlbXMubGVuZ3RoOyB4KyspIHtpZiAod2luZG93LkNQLnNob3VsZFN0b3BFeGVjdXRpb24oMCkpIGJyZWFrO1xyXG4gICAgICAgICAgICByZXNpemVHcmlkSXRlbShhbGxJdGVtc1t4XSk7XHJcbiAgICAgICAgfXdpbmRvdy5DUC5leGl0ZWRMb29wKDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiByZXNpemVJbnN0YW5jZShpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBpdGVtID0gaW5zdGFuY2UuZWxlbWVudHNbMF07XHJcbiAgICAgICAgcmVzaXplR3JpZEl0ZW0oaXRlbSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHdpbmRvdy5vbmxvYWQgPSByZXNpemVBbGxHcmlkSXRlbXMoKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZUFsbEdyaWRJdGVtcyk7XHJcbiAgICBcclxuICAgIHZhciBhbGxJdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJpdGVtXCIpO1xyXG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCBhbGxJdGVtcy5sZW5ndGg7IHgrKykge2lmICh3aW5kb3cuQ1Auc2hvdWxkU3RvcEV4ZWN1dGlvbigxKSkgYnJlYWs7XHJcbiAgICAgICAgLy8gaW1hZ2VzTG9hZGVkKGFsbEl0ZW1zW3hdLCByZXNpemVJbnN0YW5jZSk7XHJcbiAgICB9d2luZG93LkNQLmV4aXRlZExvb3AoMSk7XHJcblxyXG59KTsiXX0=
